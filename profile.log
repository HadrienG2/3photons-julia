This is a profile from the following Julia run:

    $ time julia --project=. --color=yes -- src/3photons.jl --no-photon-sorting

To keep this profile reasonably short, the profiler was asked to cut off
lines of code which account for <2% (120 samples) of running time and to ignore
children of functions which are tiny wrt the parent ("noise floor" of 1).

As a result, the Self overhead will be overestimated a bit.

How to read the chosen relative metrics:

- Large Children%Total means that this line of code, and the functions that it
  recursively calls, account for a large fraction of the simulation time.
- Large Self%Total means that there's a lot of work going on at this specific
  line of code (not in its callees, or spread out across many small callees),
  and therefore it's worth directly investigating for optimization.
- Large Self%Children quantifies the relative weight of a line of code with
  respect to the function that it transitively calls.

How to use these metrics for optimization:

- If you are lucky enough to have lines of code with high Self%Total time,
  investigate these as your first optimization target.
- Next, dive through functions with high Children%Total time, wondering how they
  could call their children less (e.g. via caching) or call them more
  efficiently (e.g. via inlining).



Children%Total @ Self%Total @ Self%Children @ Children samples and description
===============@============@===============@===================================
100%           @ 0%         @ 0%            @ 6068 <project>/src/Scheduling.jl:66; run_simulation_seq(::UInt64, ::Main.Random.RanfGenerator, ::Main.MainModule.var"#simulate_events#2"{Main.Config.Configuration,Main.Coupling.Couplings,Main.EvGen.EventGener...
~~~~~~~~~~~~~~~@~~~~~~~~~~~~@~~~~~~~~~~~~~~~@~|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
47.2%          @ 6.3%       @ 13.5%         @ +2863 <project>/src/3photons.jl:153; (::Main.MainModule.var"#simulate_events#2"{Main.Config.Configuration,Main.Coupling.Couplings,Main.EvGen.EventGenerator{true}})(::UInt64, ::Main.Random.RanfGenerator)
40.3%          @ 1.5%       @ 3.8%          @ | 2477 <project>/src/EvGen.jl:170; generate_event!(::Main.Random.RanfGenerator, ::Main.EvGen.EventGenerator{true})
---------------@------------@---------------@-|-|-------------------------------
22.5%          @ 0%         @ 0%            @ | +1365 <project>/src/EvGen.jl:117; generate_event_raw!(::Main.Random.RanfGenerator)
22.5%          @ 0%         @ 0%            @ | | 1365 ~/.julia/packages/StaticArrays/1g9bq/src/SMatrix.jl:136; macro expansion
22.5%          @ 1.9%       @ 8.5%          @ | |  1365 ~/.julia/packages/StaticArrays/1g9bq/src/SMatrix.jl:131; #2
...............@............@...............@.|.|..|............................
11.1%          @ 0%         @ 0.3%          @ | |  +671 <project>/src/EvGen.jl:123; macro expansion
11.0%          @ 3.4%       @ 31.2%         @ | |  | 669 <project>/src/Random.jl:92; random!
7.6%           @ 7.6%       @ 100%          @ | |  |  460 <project>/src/Random.jl:75; random_vector!(::Main.Random.RanfGenerator, ::Val{1})
...............@............@...............@.|.|..|............................
5.7%           @ 0.4%       @ 6.7%          @ | |  +344 <project>/src/EvGen.jl:121; macro expansion
5.3%           @ 1.7%       @ 32.7%         @ | |  | 321 <project>/src/Random.jl:92; random!
3.6%           @ 3.6%       @ 100%          @ | |  |  216 <project>/src/Random.jl:75; random_vector!(::Main.Random.RanfGenerator, ::Val{1})
...............@............@...............@.|.|..|............................
3.9%           @ 0.1%       @ 1.7%          @ | |  +234 <project>/src/EvGen.jl:119; macro expansion
3.8%           @ 1.1%       @ 30.9%         @ | |  | 230 <project>/src/Random.jl:92; random!
2.6%           @ 2.6%       @ 100%          @ | |  |  159 <project>/src/Random.jl:75; random_vector!(::Main.Random.RanfGenerator, ::Val{1})
---------------@------------@---------------@-|-|-------------------------------
10.8%          @ 0%         @ 0%            @ | +655  <project>/src/EvGen.jl:135; generate_event_raw!(::Main.Random.RanfGenerator)
10.8%          @ 0%         @ 0%            @ | | 655 <julia>/broadcast.jl:819; materialize
10.8%          @ 0%         @ 0%            @ | |  655 ~/.julia/packages/StaticArrays/1g9bq/src/broadcast.jl:26; copy
10.8%          @ 0%         @ 0%            @ | |   655 ~/.julia/packages/StaticArrays/1g9bq/src/broadcast.jl:100; _broadcast
10.8%          @ 2.2%       @ 20.6%         @ | |    655 ~/.julia/packages/StaticArrays/1g9bq/src/broadcast.jl:125; macro expansion
...............@............@...............@.|.|....|..........................
5.9%           @ 0%         @ 0%            @ | |    +360 <julia>/special/trig.jl:187; sincos(::Float64)
5.9%           @ 2.9%       @ 50.0%         @ | |    | 360 <julia>/special/trig.jl:210; sincos_kernel
3.0%           @ 0.8%       @ 27.2%         @ | |    |  180 <julia>/special/trig.jl:75; sin_kernel
2.2%           @ 2.2%       @ 100%          @ | |    |   131 <julia>/float.jl:405; *
...............@............@...............@.|.|....|..........................
2.6%           @ 2.6%       @ 100%          @ | |    +160 <julia>/special/trig.jl:184; sincos(::Float64)
---------------@------------@---------------@-|-|-------------------------------
6.0%           @ 0.1%       @ 1.9%          @ | +363  <project>/src/EvGen.jl:137; generate_event_raw!(::Main.Random.RanfGenerator)
5.9%           @ 0%         @ 0%            @ | | 356 <julia>/broadcast.jl:819; materialize
5.9%           @ 0%         @ 0%            @ | |  356 ~/.julia/packages/StaticArrays/1g9bq/src/broadcast.jl:26; copy
5.9%           @ 0%         @ 0%            @ | |   356 ~/.julia/packages/StaticArrays/1g9bq/src/broadcast.jl:100; _broadcast
5.9%           @ 0%         @ 0%            @ | |    356 ~/.julia/packages/StaticArrays/1g9bq/src/broadcast.jl:125; macro expansion
5.9%           @ 1.9%       @ 32.3%         @ | |     356 <julia>/broadcast.jl:304; #2
4.0%           @ 4.0%       @ 100%          @ | |      241 <julia>/special/log.jl:279; log(::Float64)
~~~~~~~~~~~~~~~@~~~~~~~~~~~~@~~~~~~~~~~~~~~~@~|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
45.1%          @ 2.2%       @ 4.9%          @ +2734 <project>/src/3photons.jl:162; (::Main.MainModule.var"#simulate_events#2"{Main.Config.Configuration,Main.Coupling.Couplings,Main.EvGen.EventGenerator{true}})(::UInt64, ::Main.Random.RanfGenerator)
---------------@------------@---------------@-||--------------------------------
27.2%          @ 1.2%       @ 4.4%          @ |+1650 <project>/src/MatElems.jl:67; StaticArrays.SArray{Tuple{5,8},Float64,2,40}(::Main.Coupling.Couplings, ::Main.EvData.Event{true})
...............@............@...............@.|||...............................
8.9%           @ 0%         @ 0%            @ ||+537 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:11; map
8.9%           @ 0%         @ 0%            @ ||| 537 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:21; _map
8.9%           @ 0%         @ 0%            @ |||  537 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:55; macro expansion
8.9%           @ 0.5%       @ 5.2%          @ |||   537 <project>/src/MatElems.jl:67; #1
'''''''''''''''@''''''''''''@'''''''''''''''@'|||'''|'''''''''''''''''''''''''''
4.5%           @ 0.2%       @ 4.0%          @ |||   +273 <project>/src/Spinor.jl:139; ùõº_amp(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Main.Spinor.PhotonHelicities)
4.3%           @ 4.3%       @ 100%          @ |||   | 262 <project>/src/Spinor.jl:103; ùõº‚Çç‚Çä‚Çã‚Çã‚Çé(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Int64, ::Int64, ::Int64)
'''''''''''''''@''''''''''''@'''''''''''''''@'|||'''|'''''''''''''''''''''''''''
3.9%           @ 0%         @ 0%            @ |||   +236 <julia>/complex.jl:317; *
3.9%           @ 3.9%       @ 100%          @ |||   | 236 <julia>/float.jl:405; *
...............@............@...............@.|||...............................
4.7%           @ 0.3%       @ 5.9%          @ ||+287 <project>/src/Spinor.jl:141; ùõº_amp(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Main.Spinor.PhotonHelicities)
4.4%           @ 2.3%       @ 51.9%         @ ||| 270 <project>/src/Spinor.jl:103; ùõº‚Çç‚Çä‚Çã‚Çã‚Çé(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Int64, ::Int64, ::Int64)
2.1%           @ 2.1%       @ 100%          @ |||  130 <julia>/complex.jl:376; /(::Complex{Float64}, ::Complex{Float64})
...............@............@...............@.|||...............................
4.6%           @ 0.4%       @ 8.2%          @ ||+279 <project>/src/Spinor.jl:145; ùõº_amp(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Main.Spinor.PhotonHelicities)
4.2%           @ 4.2%       @ 100%          @ ||| 256 <project>/src/Spinor.jl:103; ùõº‚Çç‚Çä‚Çã‚Çã‚Çé(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Int64, ::Int64, ::Int64)
...............@............@...............@.|||...............................
3.1%           @ 0.3%       @ 7.9%          @ ||+191 <project>/src/Spinor.jl:149; ùõº_amp(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Main.Spinor.PhotonHelicities)
2.9%           @ 2.9%       @ 100%          @ ||| 176 <project>/src/Spinor.jl:97; ùõº‚Çç‚Çä‚Çä‚Çã‚Çé(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Int64, ::Int64, ::Int64)
...............@............@...............@.|||...............................
2.6%           @ 0.3%       @ 10.6%         @ ||+160 <project>/src/Spinor.jl:143; ùõº_amp(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Main.Spinor.PhotonHelicities)
2.4%           @ 2.4%       @ 100%          @ ||| 143 <project>/src/Spinor.jl:97; ùõº‚Çç‚Çä‚Çä‚Çã‚Çé(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Int64, ::Int64, ::Int64)
...............@............@...............@.|||...............................
2.0%           @ 2.0%       @ 100%          @ ||+123 <project>/src/Spinor.jl:147; ùõº_amp(::StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}, ::Main.Spinor.PhotonHelicities)
---------------@------------@---------------@-||--------------------------------
8.7%           @ 0%         @ 0%            @ |+527  <project>/src/MatElems.jl:68; StaticArrays.SArray{Tuple{5,8},Float64,2,40}(::Main.Coupling.Couplings, ::Main.EvData.Event{true})
8.7%           @ 0%         @ 0%            @ || 527 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:11; map
8.7%           @ 0%         @ 0%            @ ||  527 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:21; _map
8.7%           @ 0%         @ 0%            @ ||   527 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:55; macro expansion
8.7%           @ 8.7%       @ 100%          @ ||    527 <project>/src/MatElems.jl:68; #2
---------------@------------@---------------@-||--------------------------------
4.5%           @ 2.0%       @ 44.7%         @ |+273  <project>/src/MatElems.jl:63; StaticArrays.SArray{Tuple{5,8},Float64,2,40}(::Main.Coupling.Couplings, ::Main.EvData.Event{true})
2.5%           @ 0.2%       @ 6.0%          @ || 151 <project>/src/Spinor.jl:59; StaticArrays.SArray{Tuple{5,5},Complex{Float64},2,25}(::Main.EvData.Event{true})
2.3%           @ 0.3%       @ 10.6%         @ ||  142 ~/.julia/packages/StaticArrays/1g9bq/src/SVector.jl:68; macro expansion
2.1%           @ 2.1%       @ 100%          @ ||   127 ~/.julia/packages/StaticArrays/1g9bq/src/SVector.jl:63; (::Main.Spinor.var"#3#5"{Main.EvData.Event{true},StaticArrays.SArray{Tuple{5},Float64,1,5}})(::Int64)
---------------@------------@---------------@-||--------------------------------
2.5%           @ 0%         @ 0%            @ |+149  <project>/src/MatElems.jl:69; StaticArrays.SArray{Tuple{5,8},Float64,2,40}(::Main.Coupling.Couplings, ::Main.EvData.Event{true})
2.5%           @ 0%         @ 0%            @ || 149 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:11; map
2.5%           @ 0%         @ 0%            @ ||  149 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:21; _map
2.5%           @ 0.1%       @ 33.6%         @ ||   149 ~/.julia/packages/StaticArrays/1g9bq/src/mapreduce.jl:55; macro expansion
2.4%           @ 2.4%       @ 100%          @ ||    144 <project>/src/MatElems.jl:69; #3
~~~~~~~~~~~~~~~@~~~~~~~~~~~~@~~~~~~~~~~~~~~~@~|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
4.1%           @ 4.1%       @ 100%          @ +250  <project>/src/3photons.jl:158; (::Main.MainModule.var"#simulate_events#2"{Main.Config.Configuration,Main.Coupling.Couplings,Main.EvGen.EventGenerator{true}})(::UInt64, ::Main.Random.RanfGenerator)
~~~~~~~~~~~~~~~@~~~~~~~~~~~~@~~~~~~~~~~~~~~~@~|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
3.6%           @ 1.3%       @ 36.4%         @ +217  <project>/src/3photons.jl:169; (::Main.MainModule.var"#simulate_events#2"{Main.Config.Configuration,Main.Coupling.Couplings,Main.EvGen.EventGenerator{true}})(::UInt64, ::Main.Random.RanfGenerator)
2.2%           @ 0%         @ 0%            @ | 138 <project>/src/ResAcc.jl:137; integrate_event!(::Main.ResAcc.ResultsAccumulator, ::StaticArrays.SArray{Tuple{5,8},Float64,2,40})
2.2%           @ 2.2%       @ 100%          @ |  138 <project>/src/MatElems.jl:95; m¬≤_sums
